<template name="new_expense">
  <div id="expense-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="expense-modal" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
      <h3 id="myModalLabel">Add expense</h3>
    </div>
    <div class="modal-body">      
      <div class="form-horizontal">
        <div class="control-group">
          <label class="control-label">Expense name</label>
          <div class="controls">
            <input type="text" class="input-block-level" placeholder="Expense name" id="expense-name" required />
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">Expense type</label>
          <div class="controls">
            <select id="expense-type" class="input-block-level">
              {{#each expense_types}}
                <option value="{{_id}}">{{name}}</option>
              {{/each}}
            </select>
          </div>
        </div>
        
        <div class="control-group">
          <label class="control-label">Expense cost</label>
          <div class="controls">
            <input type="number" class="input-block-level" placeholder="Cost" id="expense-cost" required />
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      <a id="add-expense" class="btn btn-primary">Add expense</a>
    </div>
  </div>
</template>
<template name="expenses">
  {{fun.name}}
{{#if fun.expenses}}
    <h2 class="muted">Expenses</h2>
    <table class="table table-striped">
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Cost</th>
        <th WIDTH="30"></th>
      </tr>
      {{#each fun.expenses}}
        {{> expense}}
      {{/each}}
      <tr>
        <td></td>
        <td></td>
        <td>{{expensesTotal fun}}</td>
        <td></td>
      </tr>
    </table>
  {{else}}
    <p>This fun has no expenses yet</p>
  {{/if}}

  <a href="#expense-modal" data-toggle="modal" class="btn btn-success">Add expense</a>
  {{> new_expense}}
</template>
<template name="expense">
  <tr>
    <td><a href="#" id="{{_id}}_name" data-type="text" class="editable editable-click">{{name}}</a></td>
    <td><a href="#" id="{{_id}}_type" data-type="select" class="editable editable-click">{{expense_type.name}}</a></td>
    <td><a href="#" id="{{_id}}_cost" data-type="text" class="editable editable-click">{{formatMoolah cost}}</a></td>
    <td><a href="#" id="remove"><i class="icon-remove"> </i></a></td>
  </tr>
</template>